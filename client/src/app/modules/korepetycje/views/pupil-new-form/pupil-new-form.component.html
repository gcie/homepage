<div class="bg"></div>
<div fxLayout="row" fxLayoutAlign="center stretch">
    <div fxLayout="column" fxLayoutAlign="start center" class="wrapper">
        <mat-card style="width: 100%; margin: 8px">
            <mat-card-title style="text-align: center;">
                Korepetycje MOSTowe: formularz dla ucznia
            </mat-card-title>
            <mat-card-content style="width: 100%;">
                <mat-vertical-stepper #stepper linear style="width: 100%;">
                    <mat-step [stepControl]="contactForm">
                        <form [formGroup]="contactForm" fxLayout="column">
                            <ng-template matStepLabel>Twoje dane</ng-template>
                            <mat-form-field>
                                <mat-label>Imię i nazwisko</mat-label>
                                <input matInput formControlName="name" required>
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Adres email</mat-label>
                                <input matInput formControlName="email" required>
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Nr telefonu (opcjonalnie)</mat-label>
                                <input matInput formControlName="phone">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Szkoła i klasa</mat-label>
                                <input matInput formControlName="class" required>
                            </mat-form-field>

                            <mat-checkbox formControlName="isMature">Jestem pełnoletni/pełnoletnia</mat-checkbox>
                            <div style="padding-top: 16px;">
                                <button mat-raised-button color="accent" [disabled]="!contactForm.valid"
                                    matStepperNext>Dalej</button>
                            </div>
                        </form>
                    </mat-step>
                    <mat-step [stepControl]="parentForm">
                        <form [formGroup]="parentForm" fxLayout="column">
                            <ng-template matStepLabel>Dane rodzica (opcjonalnie)</ng-template>
                            <mat-form-field>
                                <mat-label>Imię i nazwisko</mat-label>
                                <input matInput formControlName="parentName">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Adres email</mat-label>
                                <input matInput formControlName="parentEmail">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Nr telefonu</mat-label>
                                <input matInput formControlName="parentPhone">
                            </mat-form-field>
                            <div fxLayout="row" fxLayoutGap="8px">
                                <button mat-button matStepperPrevious>Wstecz</button>
                                <button mat-raised-button matStepperNext color="accent">Dalej</button>
                            </div>
                        </form>
                    </mat-step>
                    <mat-step [stepControl]="lessonsForm">
                        <form [formGroup]="lessonsForm" fxLayout="column" fxLayoutGap="8px">
                            <ng-template matStepLabel>Dane dot. korepetycji</ng-template>
                            <h2 class="mat-h2">Które przedmioty sprawiają ci trudność?</h2>
                            <div>
                                <multiselect-checkbox formControlName="needs" allowCustom="3"
                                    customPlaceholder="inny...">
                                </multiselect-checkbox>
                                <div *ngIf="lessonsForm.get('needs')!.invalid && (lessonsForm.get('needs')!.dirty || lessonsForm.get('needs')!.touched)"
                                    class="alert mat-small">Wybierz co najmniej 1 przedmiot
                                </div>
                            </div>

                            <div *ngIf="wybranePrzedmioty.length > 1" fxLayout="column" fxLayoutGap="8px">
                                <h3 class="mat-h3">A gdybyś mógł/mogła wybrać tylko jeden, to który?</h3>
                                <span class="mat-body-2">Czasami ciężko nam znaleźć korepetytora, który chciałby uczyć
                                    więcej niż jeden przedmiot. Oczywiście jeśli się taki znajdzie, to będziesz
                                    pierwszy/pierwsza w kolejce!</span>
                                <mat-radio-group fxLayout="column" formControlName="mainNeeds">
                                    <mat-radio-button *ngFor="let przedmiot of wybranePrzedmioty" [value]="przedmiot">
                                        {{ przedmiot }}</mat-radio-button>
                                </mat-radio-group>
                            </div>

                            <h2 class="mat-h2">Jaka forma korepetycji będzie najodpowiedniejsza? Zdalnie czy
                                stacjonarnie w Moście?</h2>

                            <mat-radio-group fxLayout="column" formControlName="remoteOrStationary">
                                <mat-radio-button [value]="5">Tylko zdalnie</mat-radio-button>
                                <mat-radio-button [value]="4">Wolę zdalnie, ale może być w Moście</mat-radio-button>
                                <mat-radio-button [value]="3">Bez różnicy</mat-radio-button>
                                <mat-radio-button [value]="2">Wolę w Moście, ale może być zdalnie</mat-radio-button>
                                <mat-radio-button [value]="1">Tylko w Moście</mat-radio-button>
                            </mat-radio-group>

                            <h2 class="mat-h2">Czy uczęszczałeś/uczęszczałaś już na korepetycje w Moście?</h2>

                            <mat-radio-group fxLayout="column" formControlName="alreadyAttended">
                                <mat-radio-button [value]="true">Tak</mat-radio-button>
                                <mat-radio-button [value]="false">Nie</mat-radio-button>
                            </mat-radio-group>

                            <h3 *ngIf="lessonsForm.get('alreadyAttended')?.value" class="mat-h3">A
                                pamiętasz imię i/lub nazwisko poprzedniego tutora?</h3>

                            <mat-form-field *ngIf="lessonsForm.get('alreadyAttended')?.value">
                                <mat-label>Imię i/lub nazwisko</mat-label>
                                <input matInput formControlName="previousTutor">
                            </mat-form-field>

                            <div fxLayout="row" fxLayoutGap="8px">
                                <button mat-button matStepperPrevious>Wstecz</button>
                                <button mat-raised-button matStepperNext color="accent"
                                    [disabled]="!lessonsForm?.valid">Dalej</button>
                            </div>
                        </form>
                    </mat-step>
                    <mat-step>
                        <form [formGroup]="clausesForm" fxLayout="column" fxLayoutGap="8px">

                            <ng-template matStepLabel>Klauzule informacyjne</ng-template>
                            <div class="mat-h2">Kaluzula informacyjna dotycząca przetwarzania danych osobowych</div>
                            <div class="mat-body">
                                Zgodnie z Rozporządzeniem Parlamentu Europejskiego i Rady (UE) 2016/679 z dnia 27
                                kwietnia 2016 r. w sprawie ochrony osób fizycznych w związku z przetwarzaniem danych
                                osobowych i w sprawie swobodnego przepływu takich danych oraz uchylenia dyrektywy
                                95/46/WE (dalej jako „RODO”) informujemy, że: <br /> 1. Administratorem Twoich danych
                                jest Stowarzyszenie Akademickie MOST, które zgodnie ze statutem wspiera działania
                                Salezjańskiego Duszpasterstwa Akademickiego MOST na zewnątrz, Plac Grunwaldzki 3, 50-377
                                Wrocław. Z administratorem danych można się skontaktować poprzez adres e-mail:
                                sda.most@gmail.com; <br /> 2. Wyżej wymienione dane osobowe będą przetwarzane w celu
                                kwalifikacji, a następnie organizacji uczestnictwa w Korepetycjach MOSTowych oraz w
                                zakresie niezbędnym dla bezpieczeństwa i ochrony zdrowia uczestnika; <br /> 3. Podstawą
                                przetwarzania tych danych jest moja dobrowolna zgoda (art. 6 ust.1. lit a. RODO),
                                przechowywanie odbywa na podstawie art. 92h Ustawy o systemie oświaty; <br /> 4. Brak
                                wyrażenia zgody skutkuje brakiem możliwości uczestnictwa w organizowanym spotkaniu;
                                <br /> 5. Dane osobowe będą przetwarzane u Administratora przez okres spotkania, a
                                następnie przechowywane przez okres 5 lat po zakończeniu spotkania (od dnia usunięcia
                                zgłoszenia z bazy spotkania); <br /> 6. Dane będą przekazywane jedynie organom
                                nadzorczym posiadających uprawnienia do sprawowania kontroli prowadzonego
                                wydarzenia;<br /> 7. Uczestnicy posiadają prawo dostępu do treści wymienionych danych
                                oraz prawo ich sprostowania, usunięcia, ograniczenia przetwarzania, prawo do
                                przenoszenia danych, prawo wniesienia sprzeciwu, prawo do cofnięcia zgody w dowolnym
                                momencie bez wpływu na zgodność z prawem przetwarzania, którego dokonano na podstawie
                                zgody przed jej cofnięciem;<br /> 8. Uczestnikom przysługuje prawo wniesienia skargi do
                                Organu Nadzorczego, gdy uznam, iż przetwarzanie tych danych osobowych narusza przepisy
                                rozporządzenia RODO; </div>
                            <mat-checkbox formControlName="clause1">
                                <span class="alert mat-body-1">*</span>
                                <span class="mat-body-1" style="white-space: normal;">
                                    Zapoznałem (-am) się z treścią klauzuli informacyjnej, w tym z informacją o celach
                                    i sposobach przetwarzania moich danych osobowych oraz prawach przysługujących mi w
                                    związku z przetwarzaniem danych osobowych przez Salezjańskie Duszpasterstwo
                                    Akademickie MOST i Stowarzyszenie Akademickie MOST.</span>
                            </mat-checkbox>
                            <mat-checkbox formControlName="clause2" required>
                                <span class="alert mat-body-1">*</span>
                                <span class="mat-body-1" style="white-space: normal;">
                                    Wyrażam zgodę na przetwarzanie przez Salezjańskie Duszpasterstwo Akademickie MOST i
                                    Stowarzyszenie Akademickie MOST, Plac Grunwaldzki 3, 50-377 Wrocław danych osobowych
                                    zawartych w Formularzu zgłoszenia w celu organizacji uczestnictwa w Korepetycjach
                                    MOSTowych oraz w zakresie niezbędnym dla bezpieczeństwa i ochrony zdrowia
                                    uczestnika.</span>
                            </mat-checkbox>
                            <mat-checkbox formControlName="clause3" required>
                                <span class="alert mat-body-1">*</span>
                                <span class="mat-body-1" style="white-space: normal;">
                                    Wyrażam zgodę na otrzymywanie drogą elektroniczną na podany adres mailowy informacji
                                    od Salezjańskiego Duszpasterstwa Akademickiego MOST i Stowarzyszenia Akademickiego
                                    MOST.
                                </span>
                            </mat-checkbox>
                            <div fxLayout="row" fxLayoutGap="8px">
                                <button mat-button matStepperPrevious>Wstecz</button>
                                <button mat-raised-button matStepperNext color="accent" [disabled]="!clausesForm?.valid"
                                    (click)="submit()">Wyślij</button>
                            </div>
                        </form>
                    </mat-step>
                </mat-vertical-stepper>
            </mat-card-content>
        </mat-card>
    </div>
</div>